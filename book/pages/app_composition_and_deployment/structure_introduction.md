{% panel style="success", title="Providing Feedback" %}
**Provide feedback at the [survey](https://www.surveymonkey.com/r/JH35X82)**

{% endpanel %}

{% panel style="info", title="TL;DR" %}

- リソース構成は一つ以上の git リポジトリに保管される
- 疎結合に保つために、ディレクトリの階層構造、git ブランチ、git リポジトリが使用できる

{% endpanel %}

# リソース構成の構造

このセクションの各章では、git を使ってリソース構成を構造化する方法を説明します。

はじめにディレクトリの階層構造を使った単純なアプローチに慣れてから、ブランチやリポジトリを使った構造化を行うこともできます。

## 背景

用語:

- **Base:** 複数のプロジェクトにインポートできるように**共通部分をくくり出した共有のリソース構成**
- **Overlay とカスタマイズ:** 共有のリソース構成を特定のアプリケーション、環境、目的に合わせて修正すること

| テクニック                              | 分離する変更      | 用途                       | ワークフロー                      |
| ---------------------------------- | ----------- | ------------------------ | --------------------------- |
| [ディレクトリ](structure_directories.md) | NA          | 基本的な構造                   | 変更はただちにグローバルに伝播される          |
| [ブランチ](structure_branches.md)      | **環境をまたぐ**  | 環境をまたぐ変更を促進する            | 線形な段階で変更が促進される              |
| [リポジトリ](structure_repositories.md) | **チームをまたぐ** | チームをまたいで共有する構成をまたいで変更を取得 | 変更は使用者が pull する (アップグレードなど) |

コンセプト:

- リソース構成を組織化するために、最初はディレクトリの階層構造を使った構造化だけを採用してもかまいません。
  - Overlay / カスタマイズするための Base はディレクトリをまたがって抜き出す
- 同じアプリケーションの複数のデプロイ環境を疎結合に作ることができます
  - **環境を分離するためにブランチを分離**する
  - ブランチをまたがって共通部分を抜き出した Base をもとに Overlay / カスタマイズを行う
- 複数のチームが共有の構成を疎結合にに使うことができます
  - **チームを分離するためにリポジトリを分離**する
  - リポジトリをまたがった共通部分を抜き出した Base をもとに Overlay /カスタマイズを行う
